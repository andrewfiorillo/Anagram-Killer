<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
	
	<title>Scrabble Killer</title>
	
	<link rel="stylesheet" href="css/default.css" type="text/css" />
	<link rel="stylesheet" href="css/style.css" type="text/css" />
	
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/dictionary.js"></script>
	<script type="text/javascript">		
		
		
		$.fn.input = function(fn) {
			var $this = this;
			if (!fn) {
				return $this.trigger('keydown.input');
			}
			return $this.bind({
				'input.input': function(event) {
					$this.unbind('keydown.input');
					fn.call(this, event);
				},
				'keydown.input': function(event) {
					fn.call(this, event);
				}
			});
		};
		
		
		function combine(a) {
			function fn(n, src, got, all) {
				if (n == 0) {
					if (got.length > 0) all[all.length] = got;
		      		return;
		    	}
				for (var j = 0; j < src.length; j++) fn( n - 1, src.slice(j + 1), got.concat([src[j]]), all );
		    	return;
			}
			var all = [];
			for (var i=0; i < a.length; i++) fn(i, a, [], all);
			all.push(a);
			return all;
		}
		
		
		function solver() {
			
			var words	= [],
				data	= "",
				output	= "",
				string	= $('#string').val().toUpperCase( ).split(""),
				strings	= combine(string),
				slen	= strings.length;
				
			strings.reverse();

			for (var i=0; i<slen; i++) {	
				var key = strings[i].sort().join("");
				if (dictionary[key]) words = words.concat(dictionary[key]);
			}

			for (var i=0; i<words.length; i++) {
				if (words[i].length === string.length) data += "<li><span><strong>" + words[i] + "</strong></span></li>";
				else data += "<li><span>" + words[i] + "</span></li>";
			}
			
			if (data == "")	output += "<div style='padding-top:5px;'>No Matches</div>";
			else 			output += "<ul>"+data.toLowerCase()+"</ul>";
			
			$('#loading').hide();	
			$("#output").html(output);
			//$("#string").focus().select();
				
		}
		
		
		$(function() {		
			$('#string').input(function() {
				$("#output").html("");
				$('#loading').show();
				setTimeout("solver();",0);
			});
			$('#solver').submit(function() {
				$('#string').blur();
				$("#output").html("");
				$('#loading').show();
				setTimeout("solver();",0);
				return false;
			});		
		});
		
	</script>

</head>

<body>

	<div id="container">
		<div id="input">
			<form name="solver" method="GET" action="jstest.html" id="solver">
				<input type="text" name="string" id="string" placeholder="Search..." />
				<input name="submit" type="submit" id="submit" value="Submit" />
				<div style="clear:both;"></div>
			</form>
		</div>
		<img src="images/loading.gif" id="loading" style="display:none;" />
		<div id="output"></div>
	</div>
	
</body>
</html>

